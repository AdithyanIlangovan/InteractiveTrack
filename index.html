<!DOCTYPE html> 
  
<html lang="en"> 

<head> 
   <meta charset="utf-8"> 
   <title>Custom HTML5 Video Player</title> 
   <link rel="stylesheet" type="text/css" href="style.css">
</head> 

<body>

<p>Start playback.</p>

<button onclick="myFunction()">Click to play</button>

<p id="demo"></p>

</body>

<script>

var mainTimerHandle = "";

function myFunction() {
    document.getElementById("demo").innerHTML = "Started";
    mainTimerHandle = setInterval(mainTimer, 100);
}

var mainIterationCount = 0;
var scriptAdded = new Boolean(false);

function mainTimer() {
    
    if (mainIterationCount == 0)
    {
        setTimeout(loadMainBody, 0);
    }
    
    if(scriptAdded == true)
        testadd();
    
    mainIterationCount=mainIterationCount+1;
}

function loadMainBody()
{
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      
        var nodeContents = this.responseText;
        document.getElementsByTagName('body')[0].innerHTML = nodeContents;

        loadMainScript();
    }
  };
  xhttp.open("GET", "body.xml", true);
  xhttp.send();
}

function loadMainScript()
{
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      
        var scriptContents = this.responseText;
        var theScript = document.createElement('script');
        theScript.appendChild(document.createTextNode(scriptContents));
        document.getElementsByTagName('head')[0].appendChild(theScript);
        scriptAdded = true;
        
    }
  };
  xhttp.open("GET", "main.js", true);
  xhttp.send();
}

function loadXMLDoc() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "xmlhttp_info.txt", true);
  xhttp.send();
}
</script>


</html>
